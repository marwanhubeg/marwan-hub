// ===== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© =====
let db = null;
async function initDB() {
    const SQL = await initSqlJs({ locateFile: () => 'https://cdn.jsdelivr.net/npm/sql.js@1.8.0/dist/sql-wasm.wasm' });
    db = new SQL.Database();
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
    db.run("CREATE TABLE products (id INTEGER PRIMARY KEY, name TEXT, price INTEGER, icon TEXT, description TEXT, factory TEXT, production_time TEXT, specs TEXT)");
    
    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙˆØ±Ø§Ù‹
    const products = [
        [1, 'Ù†Ø¸Ø§Ù… ERP ÙƒØ§Ù…Ù„', 2500, 'ğŸ’»', 'Ù…Ø­Ø§Ø³Ø¨Ø© + Ù…Ø®Ø§Ø²Ù† + Ù…ÙˆØ§Ø±Ø¯ Ø¨Ø´Ø±ÙŠØ©', 'Ù…ØµÙ†Ø¹ Ø§Ù„ØªÙ‚Ù†ÙŠ', '3 Ø¯Ù‚Ø§Ø¦Ù‚', '["Ù…Ø­Ø§Ø³Ø¨Ø©","Ù…Ø®Ø§Ø²Ù†","HR","ØªÙ‚Ø§Ø±ÙŠØ±"]'],
        [2, 'CRM Ù…ØªÙ‚Ø¯Ù…', 1900, 'ğŸ“Š', 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„ØªÙŠÙƒØªØ³', 'Ù…ØµÙ†Ø¹ Ø§Ù„ØªÙ‚Ù†ÙŠ', '2 Ø¯Ù‚ÙŠÙ‚Ø©', '["Ø¹Ù…Ù„Ø§Ø¡","ØªÙŠÙƒØªØ³","ØªÙ‚Ø§Ø±ÙŠØ±"]'],
        [3, 'Ù…ØªØ¬Ø± VIP', 2800, 'ğŸ¬', 'Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ø­ØªØ±Ø§ÙÙŠ', 'Ù…ØµÙ†Ø¹ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹', '5 Ø¯Ù‚Ø§Ø¦Ù‚', '["Ø´ÙˆØ¨ÙŠÙØ§ÙŠ","Ø¨ÙˆØ§Ø¨Ø§Øª Ø¯ÙØ¹","ØªØ·Ø¨ÙŠÙ‚"]'],
        [4, 'ØªØ­Ù„ÙŠÙ„Ø§Øª Ù…Ø¨ÙŠØ¹Ø§Øª', 1500, 'ğŸ“ˆ', 'Ù†Ø¸Ø§Ù… ØªØ­Ù„ÙŠÙ„ ÙˆØªÙ‚Ø§Ø±ÙŠØ±', 'Ù…ØµÙ†Ø¹ Ø§Ù„ØªÙ‚Ù†ÙŠ', '2 Ø¯Ù‚ÙŠÙ‚Ø©', '["Ù…Ø¨ÙŠØ¹Ø§Øª","Ø£Ø±Ø¨Ø§Ø­","ØªÙˆÙ‚Ø¹Ø§Øª"]'],
        [5, 'Ù†Ø¸Ø§Ù… Ø¹ÙŠØ§Ø¯Ø§Øª', 2200, 'ğŸ¥', 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª ÙˆØ§Ù„Ù…Ø±Ø¶Ù‰', 'Ù…ØµÙ†Ø¹ Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª', '4 Ø¯Ù‚Ø§Ø¦Ù‚', '["Ø­Ø¬ÙˆØ²Ø§Øª","Ù…Ù„ÙØ§Øª Ù…Ø±Ø¶Ù‰","ÙÙˆØ§ØªÙŠØ±"]'],
        [6, 'Ù†Ø¸Ø§Ù… Ù…Ø¯Ø§Ø±Ø³', 2000, 'ğŸ«', 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯Ø§Ø±Ø³ ÙˆØ§Ù„Ø·Ù„Ø§Ø¨', 'Ù…ØµÙ†Ø¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ…', '4 Ø¯Ù‚Ø§Ø¦Ù‚', '["Ø·Ù„Ø§Ø¨","Ø¯Ø±Ø¬Ø§Øª","Ø´Ù‡Ø§Ø¯Ø§Øª"]']
    ];
    
    products.forEach(p => db.run("INSERT INTO products VALUES (?,?,?,?,?,?,?,?)", p));
    
    // Ø­ÙØ¸ ÙˆØ­Ø¯Ø©
    localStorage.setItem('marwanhub_db', JSON.stringify(Array.from(db.export())));
    location.reload();
}

// Ø´ØºÙ„Ù‡Ø§
if (!localStorage.getItem('marwanhub_db')) initDB();
